# Device-stack environment variables
# Copy to .env and adjust before running `docker compose up`

# ── Device identity ───────────────────────────────────────────────────────────
# Unique identifier sent to iot-bridge-api during enrollment.
# Must be a DNS-label-safe string (no spaces).
DEVICE_ID=sim-device-001
DEVICE_NAME=Simulated Device 001
DEVICE_TYPE=simulator

# ── Cloud endpoints ───────────────────────────────────────────────────────────
# On Linux + Docker Desktop, host.docker.internal resolves to the host.
# On bare Docker on Linux, set these to the host's actual IP or use
# a Docker network alias if the cloud stack runs in the same Docker daemon.
BRIDGE_API_URL=http://host.docker.internal:8000
THINGSBOARD_HOST=host.docker.internal
THINGSBOARD_MQTT_PORT=8883
HAWKBIT_URL=http://host.docker.internal:8070
HAWKBIT_TENANT=DEFAULT

# ── InfluxDB (for optional MQTT sensor data written by device Telegraf) ───────
# Primary device metrics come from ThingsBoard and hawkBit via the cloud-side
# Telegraf and iot-bridge-api.  These vars are only used by the device-side
# Telegraf to forward optional additional MQTT sensor data to InfluxDB.
INFLUX_URL=http://host.docker.internal:8086
INFLUX_TOKEN=my-super-secret-influx-token   # [CHANGE ME] – match cloud .env
INFLUX_ORG=cdm-org
INFLUX_BUCKET=iot-metrics

# ── step-ca PKI ───────────────────────────────────────────────────────────────
# Root CA fingerprint used to bootstrap TLS trust during enrollment.
# Retrieve after first cloud boot:
#   docker exec cdm-step-ca step certificate fingerprint /home/step/certs/root_ca.crt
STEP_CA_FINGERPRINT=RETRIEVE_AFTER_CLOUD_BOOT

# ── Timing ────────────────────────────────────────────────────────────────────
TELEMETRY_INTERVAL_S=30
POLL_INTERVAL_S=30

# ── Ports ─────────────────────────────────────────────────────────────────────
TTYD_PORT=7681
