# RAUC system.conf – reference configuration for a real Yocto A/B OTA device
#
# This file is deployed to /etc/rauc/system.conf on actual hardware.
# It is NOT used in the Docker simulation (which stubs the RAUC install step).
#
# Reference: https://rauc.readthedocs.io/en/latest/reference.html#system-configuration
#
# ── Layout ────────────────────────────────────────────────────────────────────
#   /dev/mmcblk0p1  boot partition (U-Boot, common to both slots)
#   /dev/mmcblk0p2  rootfs slot A
#   /dev/mmcblk0p3  rootfs slot B
#   /dev/mmcblk0p4  data partition (persistent, survives OTA)

[system]
compatible = cdm-sim-board
bootloader = uboot
bundle-formats = verity
statusfile = /data/rauc.status

[keyring]
# Certificate chain used to verify signed RAUC bundles.
# In production: replace with the path to the vendor-specific signing cert.
path = /etc/rauc/keyring.pem
check-crl = false

[handlers]
post-install = /usr/lib/rauc/post-install.sh

[slot.boot.0]
device = /dev/mmcblk0p1
type = raw
bootname = boot
readonly = true

[slot.rootfs.0]
device = /dev/mmcblk0p2
type = ext4
bootname = A

[slot.rootfs.1]
device = /dev/mmcblk0p3
type = ext4
bootname = B

[slot.data.0]
device = /dev/mmcblk0p4
type = ext4
allow-mounted = true
