# ─────────────────────────────────────────────────────────────────
# Tenant Stack – Environment Variables  (configured for Codespaces)
# ─────────────────────────────────────────────────────────────────

# ── Tenant identity ───────────────────────────────────────────────
TENANT_ID=tenant1
TENANT_DISPLAY_NAME=Acme Devices GmbH
TZ=Europe/Berlin

# ── External URLs (Codespaces) ────────────────────────────────────
# Tenant Caddy runs on port 8889 (provider-stack uses 8888)
EXTERNAL_URL=https://fictional-train-4xw7jp4jg3754q-8889.app.github.dev

# ThingsBoard on port 9090 (no conflict with provider-stack)
TB_EXTERNAL_URL=https://fictional-train-4xw7jp4jg3754q-9090.app.github.dev

# InfluxDB proxy on port 8087 (provider-stack uses 8086)
INFLUX_EXTERNAL_URL=https://fictional-train-4xw7jp4jg3754q-8087.app.github.dev

# ── Host Port Mapping (conflict avoidance with provider-stack) ────
# Caddy entry point (changes both host AND container port via Caddyfile)
CADDY_PORT=8889
CADDY_AUTO_HTTPS=off

# step-ca: host 9001 → container 9000  (provider uses 9000)
STEP_CA_HOST_PORT=9001

# Keycloak: host 8081 → container 8080  (provider uses 8080)
KC_HOST_PORT=8081

# ThingsBoard: host 9090 → container 9090  (no provider conflict)
TB_HOST_PORT=9090
# ThingsBoard MQTT TLS: host 8884 → container 8883  (provider uses 8883)
TB_MQTT_TLS_HOST_PORT=8884

# InfluxDB proxy: host 8087 → container 4180  (provider uses 8086)
INFLUX_HOST_PORT=8087

# IoT Bridge API: host 8001 → container 8000  (provider uses 8000)
BRIDGE_HOST_PORT=8001

# Terminal Proxy: host 8091 → container 8090
TERMINAL_HOST_PORT=8091

# ── Keycloak ──────────────────────────────────────────────────────
KC_ADMIN_USER=admin
KC_ADMIN_PASSWORD=1a94dfb1086267caeb373106ab7d658a3938a524
KC_DB_PASSWORD=b6e6827eb9a70aa3e3a3cd58bb5c8a53f27e40ab

# OIDC client secrets
GRAFANA_OIDC_SECRET=a4c5d32feb14c8f7278962c37c3023e19e6ed72f
TB_OIDC_SECRET=e73ccc81923b91e81d6cdd09396435a84dafaf83
HB_OIDC_SECRET=ea8c8ae1ff58ca554a337b26e2eced61bb874627
BRIDGE_OIDC_SECRET=9c432f4e1bdf5e2a7233a7a7f51e2a1aa69d4a94
PORTAL_OIDC_SECRET=235f23158fdd59d2517e43869cb3d89b91f05691
INFLUX_PROXY_OIDC_SECRET=d46928af715a9ed258ffcca064b815ba16f44df0

# Tenant users
TENANT_ADMIN_EMAIL=admin@acme-devices.example.com
TENANT_ADMIN_PASSWORD=438fbfe1b3a87839e8b62bb950949a0b7c367a08
TENANT_OPERATOR_EMAIL=operator@acme-devices.example.com
TENANT_OPERATOR_PASSWORD=70ae767f9a864dcb4c14b196d7d50747658f30cc
TENANT_VIEWER_EMAIL=viewer@acme-devices.example.com
TENANT_VIEWER_PASSWORD=e3b6ce1492936a35e923fb6d3a73a0624f9c359a

# Provider Keycloak federation (filled after JOIN workflow)
PROVIDER_KC_URL=https://fictional-train-4xw7jp4jg3754q-8888.app.github.dev
# PROVIDER_KC_CLIENT_ID=     ← set by init-sub-ca.sh after JOIN
# PROVIDER_KC_CLIENT_SECRET= ← set by init-sub-ca.sh after JOIN

# ── ThingsBoard ───────────────────────────────────────────────────
TB_DB_PASSWORD=f0311f85db8532f8700d9cd56e35a2f0ebc0cb06
TB_SYSADMIN_EMAIL=sysadmin@thingsboard.org
TB_SYSADMIN_PASSWORD=3531031602491514c6a4c7f6520dbb37bd7dfdb0
MQTT_SSL_ENABLED=false
MQTT_SSL_CLIENT_AUTHENTICATION=NONE

# ── hawkBit ──────────────────────────────────────────────────────
HB_DB_PASSWORD=d67cd9c4278cebfe182ac334834e31f8e8e5b009
HB_DB_ROOT_PASSWORD=9a7d35c5d2149a5c3e0fe06bd66bb4da6b8af21c
HB_ADMIN_USER=admin
HB_ADMIN_PASSWORD=dbe8cdb90a537893e28b37001bc65bca6b6dbda1
HB_RMQ_USER=admin
HB_RMQ_PASSWORD=130e6404ee74822da34fba790ff352a12ff77670

# ── InfluxDB ──────────────────────────────────────────────────────
INFLUX_ADMIN_USER=admin
INFLUX_ADMIN_PASSWORD=64dad1a4768d8d77943ca57faf42603c09a79736
INFLUX_TOKEN=a663eaf8a730a08bc5644b145a5646ea8f129a71eb5550334969ce589c3909a9
INFLUX_PROXY_COOKIE_SECRET=uv0bbnnkbweFp0vzZSInHG2BPWlIVo4flgaig4sJF2Y
# https in Codespaces → secure cookie required
INFLUX_PROXY_COOKIE_SECURE=true
INFLUX_PROXY_COOKIE_SAMESITE=none

# Portal session secret
PORTAL_SESSION_SECRET=0fb0b11c303352b6a09cf50d0a1c514841ab08d5

# ── step-ca (Tenant Issuing Sub-CA) ──────────────────────────────
STEP_CA_PKI_NAME=Acme Devices GmbH Sub-CA
STEP_CA_DNS_NAMES=step-ca,localhost
STEP_CA_ADMIN_PROVISIONER=tenant-admin@cdm.local
STEP_CA_ENABLE_ACME=true
STEP_CA_ENABLE_REMOTE_MGMT=true
STEP_CA_ADDRESS=:9000

STEP_CA_PROVISIONER_NAME=iot-bridge
STEP_CA_PROVISIONER_PASSWORD=080deac35d9296c9546bb03f5709b4bc50cdfef8
STEP_CA_ADMIN_PASSWORD=79464424b6cbfc712d37751ba98224535b3f305c

# Fingerprint of tenant sub-CA root cert (filled after first start)
STEP_CA_FINGERPRINT=

# Connection to Provider step-ca (for Sub-CA signing via init-sub-ca.sh)
STEP_CA_PROVIDER_URL=https://fictional-train-4xw7jp4jg3754q-9000.app.github.dev
STEP_CA_PROVIDER_FINGERPRINT=5d49b58d0cd534061b543b299eab982e7015dc2b1c73c4546da7803b9716f496
STEP_CA_PROVIDER_ADMIN_PROVISIONER=cdm-admin@cdm.local
STEP_CA_PROVIDER_ADMIN_PASSWORD=8d979ac9e28f24ff9bd6b98b23f297c7

# ── Provider IoT Bridge API (JOIN workflow) ───────────────────────
PROVIDER_API_URL=https://fictional-train-4xw7jp4jg3754q-8888.app.github.dev/api
# External Keycloak URL of this tenant (sent to Provider for KC federation)
TENANT_KEYCLOAK_URL=https://fictional-train-4xw7jp4jg3754q-8889.app.github.dev/auth
JOIN_POLL_INTERVAL=30
JOIN_TIMEOUT=3600

# ── WireGuard ─────────────────────────────────────────────────────
WG_SERVER_URL=auto
WG_PORT=51820
WG_PEERS=10
# tenant1 uses 10.8.1.x  (provider uses none; tenant2 would use 10.8.2.x)
WG_INTERNAL_SUBNET=10.8.1.0
WG_SERVER_IP=10.8.1.1

# ── IoT Bridge API ────────────────────────────────────────────────
STEP_CA_VERIFY_TLS=false
